---
import Layout from '../../layouts/Layout.astro';
import TopNavigation from '../../components/TopNavigation.astro';
import Footer from '../../components/Footer.astro';

// ðŸ›‘ STEP 1: Define the function required by Astro
export async function getStaticPaths() {
	// ðŸ›‘ STEP 2: Define the array of slugs (or fetch them from a database/CMS)
	const projectSlugs = [
		{ slug: "ecommerce-re-architecture" },
		{ slug: "software-docs-migration" },
		{ slug: "high-traffic-content-portal" },
	];

	// STEP 3: Map the slugs into the required 'params' object structure
	return projectSlugs.map(project => {
		return {
			params: { slug: project.slug },
			// You can pass the actual project data here as 'props' 
			// to make the template rendering easier and faster:
			// props: projectData.find(d => d.slug === project.slug) 
		};
	});
}

// ðŸ›‘ STEP 4: Define the Page component and use the dynamic slug
const { slug } = Astro.params; 

// ðŸ›‘ TEMPORARY: Redefine the dummy data for the slug we are currently viewing
const dummyProjects = [
	{ 
		slug: "ecommerce-re-architecture",
		title: "E-Commerce Re-Architecture: 10x Faster Checkout",
		client: "Global Retailer Inc.",
		problem: "The client's legacy system was built on a monolithic platform, leading to 8-second page loads...",
		solution: "We rebuilt the entire front-end as a static, headless application using Astro...",
		results: { pageSpeed: "98/100 (from 42)", loadTime: "0.8 seconds (from 8.2s)", conversionRate: "18% increase year-over-year" },
		techStack: ["Astro", "Tailwind CSS", "Headless Commerce API"],
	},
	// Include all other project data objects here...
];

const projectData = dummyProjects.find(p => p.slug === slug);
if (!projectData) return Astro.redirect('/404'); // Handle case where slug doesn't exist

// ... rest of your imports and setup ...
---

{/* ... The rest of your HTML template uses projectData.title, projectData.client, etc. ... */}